<html>
  <head>
    <meta charset="utf-8" />
    <title>Renpy Analyser</title>
    <link rel="stylesheet" href="style.css" />
    <script src="wasm_exec.js"></script>
    <script>
      const go = new Go();
      WebAssembly.instantiateStreaming(
        fetch("./main.wasm"),
        go.importObject
      ).then((result) => {
        go.run(result.instance);
      });
    </script>
  </head>
  <body>
    <header>
      <h1>Renpy Analyser</h1>
      <p>
        This tool allows you to get a graph from Ren'Py-made visual novel, from
        a GitHub repo
      </p>
      <p>
        Learn more and ⭐️ the
        <a href="https://github.com/ewenQuim/renpy-graphviz">
          project on Github !</a
        >
      </p>

      <p>Here are a few interesting repos</p>
      <ul>
        <li>amethysts-studio/coalescence</li>
        <li>DeadSuperHero/rms-dating-simulator</li>
        <li>GinnyN/user-interface-game</li>
        <li>Lulufox/Moon_over_the_forest (intensive use of screens)</li>
        <li>SG-mancer/J-game (abusive use of `call` statements)</li>
      </ul>
      <input type="text" name="fname" id="repo" placeholder="user/repository" />
      <button onclick="getRepo()">Demystify</button>
      <p id="errorMessage">Unable to access repo</p>

      <span id="loader"></span>
    </header>

    <div id="graph" style="text-align: center"></div>

    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script src="https://unpkg.com/@hpcc-js/wasm@0.3.11/dist/index.min.js"></script>
    <script src="https://unpkg.com/d3-graphviz@3.0.5/build/d3-graphviz.js"></script>
    <script src="./renpy.js"></script>
  </body>
</html>
